<article class="max-w-fullprose dark:prose-invert">
    {{ $phrases := .Site.Params.homepage.phrases }}
  
    {{ $images := dict "lg" .Site.Params.homepage.homepageImage_lg "md" .Site.Params.homepage.homepageImage_md "sm" .Site.Params.homepage.homepageImage_sm }}
    {{ $cardImages := dict "lg" .Site.Params.homepage.whyStroke_lg "md" .Site.Params.homepage.whyStroke_md "sm" .Site.Params.homepage.whyStroke_sm }}
  
    {{ range $size, $homeImage := $images }}
    {{ $maxH := "" }}
    {{ $displayClass := "" }}

    {{ if eq $size "lg" }}
      {{ $maxH = "max-h-[760px]" }}
      {{ $displayClass = "max-lg:hidden" }}
    {{ else if eq $size "md" }}
      {{ $maxH = "max-h-[760px]" }}
      {{ $displayClass = "lg:hidden max-sm:hidden" }}
    {{ else }}
      {{ $maxH = "max-h-[600px]" }}
      {{ $displayClass = "sm:hidden" }}
    {{ end }}
      <div class="relative mx-auto w-full h-svh {{ $maxH }} overflow-hidden {{ $displayClass }}">
        <div class="absolute inset-0">
          {{ $homeImage := resources.Get $homeImage }}
          <img class="m-0 object-cover w-full h-full" src="{{ $homeImage.RelPermalink }}" alt="background stroke">
        </div>
        <div class="relative h-full sm:overflow-hidden">
          <div class="relative h-full px-1 py-1 flex flex-col items-center text-center justify-evenly">
            <div class="relative">
              <div class="inset-0 bg-gradient-ellipse"></div>
              {{ $textsize := "" }}  
              {{$maxw := "" }}
              {{ if eq $size "sm" }}
                {{ $textsize = "text-4xl"  }}
                {{$maxw = "max-w-[350px]"}}
              {{ else }}
                {{ $textsize = "text-7xl" }}
                {{$maxw = "max-w-[740px]" }}
              {{ end }}
              <h1 class="relative z-10 {{$textsize}} font-extrabold text-neutral-800 dark:text-neutral-200 {{$maxw}}">
                  {{ (index $phrases 0) | safeHTML | replaceRE "<custom>([\\s\\S]+?)</custom>" "{{< custom >}}$1{{< /custom >}}"| markdownify | safeHTML }}
              </h1>
            </div>
            <div class="w-screen relative flex flex-col items-center text-center py-4">
              <div class="relative">
                <div class="inset-0 bg-gradient-subslogan "></div>
                {{ $textsize := "" }}  
                {{$maxw := "" }}
                {{ if eq $size "sm" }}
                  {{ $textsize = "text-xl"  }}
                  {{$maxw = "max-w-[400px]"}}
                {{ else }}
                  {{ $textsize = "text-4xl" }}
                  {{$maxw = "max-w-[730px]" }}
                {{ end }}
                <h2 class="relative {{$textsize}} text-neutral-800 dark:text-neutral-300 {{ $maxw }} z-10">
                  {{ (index $phrases 1) | safeHTML | replaceRE "<custom>([\\s\\S]+?)</custom>" "{{< custom >}}$1{{< /custom >}}"| markdownify | safeHTML }}
                </h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    {{ end }}
  
    <div class="relative">
        {{ range $size, $cardImage := $cardImages }}
        {{ $displayClass := "" }}

            {{ if eq $size "lg" }}
             
              {{ $displayClass = "max-lg:hidden" }}
            {{ else if eq $size "md" }}

              {{ $displayClass = "lg:hidden max-sm:hidden" }}
            {{ else }}

              {{ $displayClass = "sm:hidden" }}
            {{ end }}
            <div class="absolute inset-0 z-10 {{ $displayClass }}">
            {{ $cardImage := resources.Get $cardImage }}
            <img class="m-0 object-cover w-full h-full nozoom" src="{{ $cardImage.RelPermalink }}" alt="background stroke">
            </div>
        {{ end }}
        {{ $global := . }}
        {{ range .Site.Params.homepage.cards }}
            {{ partial "components/card.html" (dict "left" .left "bg" .bg "title" .title "paragraph" .paragraph "img" .img "context" $global ) }}
        {{ end }}
        
        {{ $global := . }}
        {{ with .Site.Params.homepage.blog}}
          {{ partial "components/recent-articles.html" (dict "context" $global "title" .title "folder" .folder) }}
        {{ end }}

        {{ $global := . }}
        {{ with .Site.Params.homepage.aboutUs}}
          {{ partial "components/about-us.html" (dict "context" $global "data" . ) }}
        {{ end }}
    </div>


 </article>